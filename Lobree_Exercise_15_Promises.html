<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <h1>Exercise 15: Promises</h1>
  <!-- Your interface should have a field for the user to enter a width -->

  <!-- a field to enter the height  -->

  <!-- a button that retrieves and displays a photo of the indicated size. -->

  <form action="" name="photoForm">
    <label for="width">Desired WIDTH of your photo (in pixels):</label>
    <input type="number" id="width" name="width"><br><br>
    <label for="length">Desired LENGTH of your photo (in pixels):</label>
    <input type="number" id="length" name="length"><br><br>
    <input type="checkbox" id="grayscale" name="grayscale" value="grayscale">
    <label for="grayscale">Check the box if you 
                           want your picture to be in 
                           black and white
    </label>
    <br><br><br>
    <input onclick="getWidthAndLength()" value="Get My Photo!">
  </form>
  <h2>Here  is your photo:</h2>
  <div id="display-something">

  </div>

<script>
// https://picsum.photos/200/300
// https://picsum.photos/width/height

// const myBox = document.querySelector('#grayscale').checked
// console.log(myBox)

//let img = null;
const getWidthAndLength = () => {
 
  const picWidth = document.photoForm.width.value 
  const picLength = document.photoForm.length.value
  const boxIsCheckedValue = document.getElementById('grayscale').checked

    let imgPromise = new Promise((resolve, reject  ) => {
      img = new Image();
      img.addEventListener('load', resolve(img));
      img.addEventListener('error', reject('Could not load image'));
      if(boxIsCheckedValue === true) {
        img.src = `https://picsum.photos/${picWidth}/${picLength}?grayscale`;
      } else {
        img.src = `https://picsum.photos/${picWidth}/${picLength}`;
      }
    });

    imgPromise.then(fromResolve => {
      console.log("We have contact with image, Houston!")
      let node = document.getElementById('display-something');
      node.appendChild(img)
    }).catch(fromReject => {
      console.log(fromReject)
    })

}







</script> 
  
</body>
</html>